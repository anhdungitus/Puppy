<!DOCTYPE html>
<html>
<head>
    <title>Puppy.DataTable Document</title>
</head>
<body>

    <p><img src="favicon.ico" alt="Logo" /></p>
<h1 id="puppy.datatable-document">Puppy.DataTable Document</h1>
<blockquote>
<p>Project Created by <a href="http://topnguyen.net"><strong>Top Nguyen</strong></a></p>
</blockquote>
<ul>
<li><p>Configurable for DataTable from Server Side.</p>
</li>
<li><p>Support Search: <code>Text</code>, <code>DateTime</code>, <code>Enum</code>, <code>Number</code>.</p>
<blockquote>
<p>Support response and search Enum data as <code>Display Name</code> ?? <code>Description</code> ?? <code>Name</code></p>
</blockquote>
</li>
<li><p>Support Custom and transform response data. Ex: Difference <code>DateTime</code> format for each endpoint.</p>
</li>
<li><p>Support set global format for <code>DateTime</code> property.</p>
<blockquote>
<p>If <code>RequestDateTimeFormatMode</code> is Auto, the string will auto parse to <code>DateTime</code> by any format, else will use global DateTimeFormat.</p>
</blockquote>
</li>
<li><p>Support Filter Type: <code>Select</code>, <code>Text</code>, <code>None</code>.</p>
</li>
<li><p>Support submit <code>Additional Data</code> for each request, you can access all data including additional in server-side via <code>Data</code> property.</p>
</li>
<li><p>Support Develop Mode: for debug purpose: <code>console.log</code> request, response and config of DataTable.</p>
</li>
</ul>
<h1 id="how-to-use">How To Use</h1>
<ul>
<li><p>Copy <code>Assets/jquery.dataTables.columnFilter.min.js</code> to your <code>Scripts</code> folder.</p>
</li>
<li><p>Add jQuery DataTable and column filter to your master page.</p>
</li>
</ul>
<pre><code class="language-html">&lt;!-- Jquery + DataTable --&gt;
&lt;script type=&quot;text/javascript&quot; rc=&quot;//code.jquery.com/jquery-1.12.4.min.js&quot;&gt;&lt;/script&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;//cdn.datatables.net/1.10.0/js/jquery.dataTables.min.js&quot;&gt;&lt;/script&gt;

&lt;!-- You can find resources in folder &quot;Assets&quot;--&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;jquery.dataTables.columnFilter.min.js&quot;&gt;&lt;/script&gt;

&lt;!-- ColVis --&gt;
&lt;script type=&quot;text/javascript&quot; src=&quot;//cdn.datatables.net/colvis/1.1.2/js/dataTables.colVis.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
<ul>
<li><p>Copy Foler <code>Assets/DataTable</code> to your master page folder, remember to <code>Right Click</code> &gt; <code>Properties</code> &gt; <code>Build Action</code>: <code>Content</code>, <code>Copy To Output Directory</code>: <code>Copy if newer</code>.</p>
</li>
<li><p>Example to use <code>_DataTableHtml.cshtml and _DataTableScript.cshtml</code> is <code>Index.cshtml</code>.</p>
</li>
<li><p>Add DataTable to Service Collection</p>
</li>
</ul>
<pre><code class="language-csharp">// [DataTable]
services.AddDataTable(ConfigurationRoot);
</code></pre>
<ul>
<li>Use DataTable for ApplicationBuidler</li>
</ul>
<pre><code class="language-csharp">// [DataTable]
app.UseDataTable();
</code></pre>
<ul>
<li>Add &quot;DataTable&quot; section in appsettings.json to config the DateTimeFormat</li>
</ul>
<pre><code class="language-javascript">// [Auto Reload]
&quot;DataTable&quot;: {
// Response DateTime as string by format, default is &quot;dd/MM/yyyy hh:mm tt&quot;.
// If RequestDateTimeFormatMode is Specific, every request will use the format to parse to DateTime.
&quot;DateTimeFormat&quot;: &quot;dd/MM/yyyy hh:mm tt&quot;,

// Config use datetime with TimeZone. Default is &quot;UTC&quot;
// See more: https://msdn.microsoft.com/en-us/library/gg154758.aspx
&quot;DateTimeTimeZone&quot;: &quot;Singapore Standard Time&quot;, // &quot;UTC&quot;

// Control the way to parse string to DateTime every request.
// Value can be Auto or Specific, default is Auto.
&quot;RequestDateTimeFormatMode&quot;: &quot;Auto&quot;
}
</code></pre>
<ul>
<li><p>In Business, return <code>DataTablesResponseDataModel</code> to Controller by <code>{IQueryable}.GetDataTableResponse({dataTableParamModel})</code></p>
</li>
<li><p>In Controller, response ActionResult by <code>{DataTablesResponseDataModel}.GetDataTableActionResult&lt;T&gt;()</code></p>
</li>
</ul>
<h2 id="best-practive">Best Practive</h2>
<h3 id="server-side">Server Side</h3>
<pre><code class="language-csharp">[HttpPost]
[Route(&quot;users&quot;)]
public DataTableActionResult&lt;UserFacetRowViewModel&gt; GetFacetedUsers([FromForm]DataTableParamModel dataTableParamModel)
{
    var query = FakeDatabase.Users.Select(
        user =&gt;
            new UserFacetRowViewModel
            {
                Email = user.Email,
                Position = user.Position == null ? &quot;&quot; : user.Position.ToString(),
                Hired = user.Hired,
                IsAdmin = user.IsAdmin,
                Content = &quot;https://randomuser.me/api/portraits/thumb/men/&quot; + user.Id + &quot;.jpg&quot;
            });

    var response = query.GetDataTableResponse(dataTableParamModel);

    var result = response.GetDataTableActionResult&lt;UserFacetRowViewModel&gt;(
        row =&gt;
            new
            {
                Content = &quot;&lt;div&gt;&quot; +
                            &quot;  &lt;div&gt;Email: &quot; + row.Email + (row.IsAdmin ? &quot; (admin)&quot; : &quot;&quot;) +
                            &quot;&lt;/div&gt;&quot; +
                            &quot;  &lt;div&gt;Hired: &quot; + row.Hired + &quot;&lt;/div&gt;&quot; +
                            &quot;  &lt;img src='&quot; + row.Content + &quot;' /&gt;&quot; +
                            &quot;&lt;/div&gt;&quot;
            });

    return result;
}
</code></pre>
<h3 id="frontend-side">Frontend Side</h3>
<ul>
<li>Please follow sample:
<ul>
<li><code>Assets/Index.cshtml</code></li>
<li><code>Assets/DataTable/_DataTableHtml.cshtml</code></li>
<li><code>Assets/DataTable/_DataTableScript.cshtml</code></li>
</ul>
</li>
</ul>
<h3 id="sample-customising-column-rendering">Sample Customising column rendering</h3>
<pre><code class="language-csharp">public class Message
{
    public DateTime CreatedDate{get;set;}
    public User User {get;set;} 
    public ICollection&lt;Recipients&gt; Recipients {get; set;}
    public string Text {get;set;}
}

public class MessageViewModel
{
    public DateTime CreatedDate { get; set; }
    public string User { get; set; } 
     // Dont want this as a column, we are keeping it here so we can use it in the transform 
    [DataTablesExclude]
    public User UserEntity {get;set;} 
    public string Text {get;set;}
}
</code></pre>
<h3 id="specifying-initial-search-values">Specifying Initial Search Values</h3>
<ul>
<li>Use can define data for <code>DataTableModel</code> in both <code>.cs</code> file and <code>.cshtml</code> file (via Razor code)</li>
</ul>
<pre><code class="language-csharp">model
    .FilterOn(&quot;Position&quot;, new { sSelector = &quot;#custom-filter-placeholder-position&quot; }, new { sSearch = &quot;Tester&quot; }).Select(&quot;Engineer&quot;, &quot;Tester&quot;, &quot;Manager&quot;)

    .FilterOn(&quot;Id&quot;, null, new { sSearch = &quot;2~4&quot;, bEscapeRegex = false }).NumberRange()

    .FilterOn(&quot;IsAdmin&quot;, null, new { sSearch = &quot;False&quot; }).Select(&quot;True&quot;,&quot;False&quot;)

    .FilterOn(&quot;Salary&quot;, new { sSelector = &quot;#custom-filter-placeholder-salary&quot; }, new { sSearch = &quot;1000~100000&quot; }).NumberRange();

model.StateSave = false;

// ... other configs
</code></pre>


</body>
</html>